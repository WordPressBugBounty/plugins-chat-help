let wHelp=document.querySelectorAll(".wHelp"),wHelpMulti=document.querySelectorAll(".wHelp-multi"),wHelpButton=document.querySelector(".wHelp_button"),wHelpBubble=document.querySelectorAll(".wHelp-bubble"),wHelpCurrentTime=document.querySelector(".current-time"),wHelpUserAvailability=document.querySelectorAll(".wHelpUserAvailability"),wHelpMultiPopupContent=document.querySelector(".wHelp-multi__popup__content"),wHelpCheckboxDiv=document.querySelectorAll(".wHelp--checkbox"),wHelpCheckbox=document.querySelectorAll(".wHelp__checkbox"),wHelpCheckButton=document.querySelectorAll(".wHelp__send-message"),wHelpPopupContent=document.querySelectorAll(".wHelp__popup__content"),wHelpButtons=document.querySelectorAll(".wHelpButtons"),chatAvailability=document.querySelector(".chat-availability"),{autoShowPopup,autoOpenPopupTimeout}=whatshelp_frontend_script;if(wHelpCurrentTime){let e=new Date;wHelpCurrentTime.innerText=`${e.getHours()}:${e.getMinutes()}:`+e.getSeconds()}let toggleChatBtn=()=>{[...wHelp,...wHelpMulti].forEach(e=>e.classList.toggle("wHelp-show"))};if(wHelpBubble.forEach(e=>{wHelpButton||e.addEventListener("click",toggleChatBtn)}),0<alternativeWHelpBubble.length){let e=document.querySelectorAll(alternativeWHelpBubble);e.forEach(e=>{wHelpButton||e.addEventListener("click",toggleChatBtn)})}let initCheckboxState=()=>{"true"===localStorage.getItem("wHelpCheckboxValue")&&(wHelpCheckButton.forEach(e=>e.classList.remove("condition__checked")),wHelpCheckboxDiv.forEach(e=>e.style.display="none"))};function isAvailable(e,t){let a=!1,l=!1;for(var i in e){var o;e.hasOwnProperty(i)&&get_day_of_week(i)==t.day()&&(i=e[i].split("-"),o=moment.tz(i[0],"HH:mm",t.tz()),i=moment.tz(i[1],"HH:mm",t.tz()),o.year(t.year()).month(t.month()).date(t.date()),i.year(t.year()).month(t.month()).date(t.date()),t.isBetween(o,i)?a=!0:t.isBefore(o)&&(l=!0))}return{isAvailable:a,almost_available:l}}function get_day_of_week(e){return"sunday"==(e=e.toLowerCase())?0:"monday"==e?1:"tuesday"==e?2:"wednesday"==e?3:"thursday"==e?4:"friday"==e?5:"saturday"==e?6:void 0}wHelpCheckbox.forEach(e=>{e.addEventListener("change",function(){this.checked&&(localStorage.setItem("wHelpCheckboxValue",!0),initCheckboxState())})}),initCheckboxState();let handleUserAvailability=()=>{var e="true"===wHelpMultiPopupContent?.getAttribute("data-search"),t=document.querySelector(".wHelp-multi")?.classList.contains("wHelp-grid");wHelpUserAvailability.length&&(e&&wHelpMultiPopupContent.classList.add("wHelp-search"),wHelpUserAvailability.length>(t?4:3)&&wHelpMultiPopupContent.classList.add("wHelp-scroll"),wHelpUserAvailability.forEach(e=>{var t=JSON.parse(e.getAttribute("data-userAvailability")),a=e.getAttribute("data-timezone");isAvailable(t,a?moment().tz(a):moment()).isAvailable||null==t?(e.classList.add("avatar-active"),e.classList.remove("avatar-inactive")):(e.classList.add("avatar-inactive"),e.classList.remove("avatar-active"),e.setAttribute("disabled",!0))}))};function searchUser(){let a=document.getElementById("search-input").value.toUpperCase();var e=document.getElementById("multi-user").getElementsByClassName("user");Array.from(e).forEach(e=>{var t=e.querySelector(".user__info--name").textContent.toUpperCase();e.style.display=t.includes(a)?"":"none"})}handleUserAvailability();let updateButtonAvailability=()=>{wHelpButtons.forEach(e=>{var t=JSON.parse(e.getAttribute("data-btnavailablety")),a=e.getAttribute("data-timezone");isAvailable(t,a?moment().tz(a):moment()).isAvailable?(e.classList.add("avatar-active"),e.classList.remove("avatar-inactive")):(e.classList.add("avatar-inactive"),e.classList.remove("avatar-active"))})};if(updateButtonAvailability(),chatAvailability){let e=JSON.parse(chatAvailability.getAttribute("data-availability")),t=chatAvailability.getAttribute("data-timezone"),a=t?moment().tz(t):moment(),l=isAvailable(e,a);l.isAvailable?(chatAvailability.classList.add("avatar-active"),chatAvailability.classList.remove("avatar-inactive")):(chatAvailability.classList.add("avatar-inactive"),chatAvailability.classList.remove("avatar-active"))}(s=>{s("#form").length&&s("#form").validate(),wHelpPopupContent.forEach(n=>{let c=n.querySelector(".wHelp__send-message");s(n).submit(function(e){e.preventDefault();let r=s(this);r.valid()&&wHelpCheckButton.forEach(e=>{if(!e.classList.contains("condition__checked")){e=JSON.parse(chatAvailability?.getAttribute("data-availability"));if(e)if(isAvailable(e,moment()).isAvailable){var e=s(this).serialize(),l=window.location.href,i=document.title;let t=n.getAttribute("data-button"),a=n.getAttribute("data-loading");var o=n.getAttribute("data-product_attr");s.post(frontend_scripts.ajaxurl,{action:"handle_form_submission",data:e,product_id:o,nonce:frontend_scripts.nonce,current_url:l,current_title:i},e=>{e.success?(c.innerHTML=a,setTimeout(function(){window.open(e.data.whatsAppURL,frontend_scripts.open_in_new_tab),r[0].reset(),c.innerHTML=t},2e3)):alert("Error processing request.")}).fail(()=>alert("Unexpected error occurred."))}}})})})})(jQuery);let autoShowPopupFunc=()=>{autoShowPopup&&toggleChatBtn()};0<autoOpenPopupTimeout?setTimeout(autoShowPopupFunc,1e3*autoOpenPopupTimeout):autoShowPopupFunc(),document.addEventListener("DOMContentLoaded",function(){var e,t=new URLSearchParams(window.location.search).get("tab");t&&(document.querySelectorAll("#tab-menu a").forEach(e=>{e.classList.remove("active")}),e=document.querySelector(`[data-id="${t}-tab"]`))&&(e.classList.add("active"),e=document.querySelector("#"+t))&&e.scrollIntoView({behavior:"smooth"})});