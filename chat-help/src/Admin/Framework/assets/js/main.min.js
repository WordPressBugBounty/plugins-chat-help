((T,m,b,y)=>{T(b).ready(function(){T(".chat-help-setting-admin").removeClass("chat-help-preloader")});var e=T(".chat-help-field-layout_preset .chat-help-siblings .chat-help--sibling"),t=T(".chat-help-field-layout_preset .chat-help-siblings .chat-help--sibling.chat-help--active").find("input").val(),S=("button"==t||"advance_button"==t?(T(".chat-help-content .floating_chat .chat-help-section_tab-nav a:nth-child(2)").hide(),T(".chat-help-content .floating_chat .chat-help-section_tab-nav a:nth-child(1)").trigger("click")):T(".chat-help-content .floating_chat .chat-help-section_tab-nav a:nth-child(2)").show(),T(e).on("change","input",function(e){var t=T(this).val();"button"==t||"advance_button"==t?(T(".chat-help-content .floating_chat .chat-help-section_tab-nav a:nth-child(2)").hide(),T(".chat-help-content .floating_chat .chat-help-section_tab-nav a:nth-child(1)").trigger("click")):T(".chat-help-content .floating_chat .chat-help-section_tab-nav a:nth-child(2)").show()}),{});S.funcs={},S.vars={onloaded:!1,$body:T("body"),$window:T(m),$document:T(b),$form_warning:null,is_confirm:!1,form_modified:!1,code_themes:[],is_rtl:T("body").hasClass("rtl")},S.helper={uid:function(e){return(e||"")+Math.random().toString(36).substr(2,9)},preg_quote:function(e){return(e+"").replace(/(\[|\])/g,"\\$1")},name_nested_replace:function(e,t){var a=new RegExp(S.helper.preg_quote(t+"[\\d+]"),"g");e.find(":radio").each(function(){(this.checked||this.orginal_checked)&&(this.orginal_checked=!0)}),e.each(function(e){T(this).find(":input").each(function(){this.name=this.name.replace(a,t+"["+e+"]"),this.orginal_checked&&(this.checked=!0)})})},debounce:function(n,i,l){var h;return function(){var e=this,t=arguments,a=l&&!h;clearTimeout(h),h=setTimeout(function(){h=null,l||n.apply(e,t)},i),a&&n.apply(e,t)}}},T.fn.chat_help_clone=function(){for(var e=T.fn.clone.apply(this,arguments),t=this.find("select").add(this.filter("select")),a=e.find("select").add(e.filter("select")),n=0;n<t.length;++n)for(var i=0;i<t[n].options.length;++i)!0===t[n].options[i].selected&&(a[n].options[i].selected=!0);return this.find(":radio").each(function(){this.orginal_checked=this.checked}),e},T.fn.chat_help_expand_all=function(){return this.each(function(){T(this).on("click",function(e){e.preventDefault(),T(".chat-help-wrapper").toggleClass("chat-help-show-all"),T(".chat-help-section").chat_help_reload_script(),T(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent")})})},T.fn.chat_help_nav_options=function(){return this.each(function(){var a,e=T(this),t=T(m),n=T("#wpwrap"),i=e.find("a");t.on("hashchange chat-help.hashchange",function(){var e=m.location.hash.replace("#tab=",""),e=e||i.first().attr("href").replace("#tab=",""),t=T('[data-tab-id="'+e+'"]');t.length&&(t.closest(".chat-help-tab-item").addClass("chat-help-tab-expanded").siblings().removeClass("chat-help-tab-expanded"),t.next().is("ul")&&(e=(t=t.next().find("li").first().find("a")).data("tab-id")),i.removeClass("chat-help-active"),t.addClass("chat-help-active"),a&&a.addClass("hidden"),(t=T('[data-section-id="'+e+'"]')).removeClass("hidden"),t.chat_help_reload_script(),T(".chat-help-section-id").val(t.index()+1),a=t,n.hasClass("wp-responsive-open"))&&(T("html, body").animate({scrollTop:t.offset().top-50},200),n.removeClass("wp-responsive-open"))}).trigger("chat-help.hashchange")})},T.fn.chat_help_nav_metabox=function(){return this.each(function(){var a,e=T(this),n=e.find("a"),i=e.parent().find(".chat-help-section");n.each(function(t){T(this).on("click",function(e){e.preventDefault();e=T(this),n.removeClass("chat-help-active"),e.addClass("chat-help-active"),a!==y&&a.addClass("hidden"),e=i.eq(t);e.removeClass("hidden"),e.chat_help_reload_script(),a=e})}),n.first().trigger("click")})},T.fn.chat_help_page_templates=function(){this.length&&T(b).on("change",".editor-page-attributes__template select, #page_template, .edit-post-post-status + div select",function(){var e=T(this).val()||"default";T(".chat-help-page-templates").removeClass("chat-help-metabox-show").addClass("chat-help-metabox-hide"),T(".chat-help-page-"+e.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")).removeClass("chat-help-metabox-hide").addClass("chat-help-metabox-show")})},T.fn.chat_help_post_formats=function(){this.length&&T(b).on("change",'.editor-post-format select, #formatdiv input[name="post_format"]',function(){var e="0"===(e=T(this).val()||"default")?"default":e;T(".chat-help-post-formats").removeClass("chat-help-metabox-show").addClass("chat-help-metabox-hide"),T(".chat-help-post-format-"+e).removeClass("chat-help-metabox-hide").addClass("chat-help-metabox-show")})},T.fn.chat_help_search=function(){return this.each(function(){T(this).find("input").on("change keyup",function(){var t=T(this).val(),e=T(".chat-help-wrapper"),a=e.find(".chat-help-section").find("> .chat-help-field:not(.chat-help-depend-on)"),n=a.find("> .chat-help-title, .chat-help-search-tags");3<t.length?(a.addClass("chat-help-metabox-hide"),e.addClass("chat-help-search-all"),n.each(function(){var e=T(this);e.text().match(new RegExp(".*?"+t+".*?","i"))&&((e=e.closest(".chat-help-field")).removeClass("chat-help-metabox-hide"),e.parent().chat_help_reload_script())})):(a.removeClass("chat-help-metabox-hide"),e.removeClass("chat-help-search-all"))})})},T.fn.chat_help_sticky=function(){return this.each(function(){function e(){c=n.scrollTop(),r()}var a=T(this),n=T(m),i=a.find(".chat-help-header-inner"),l=parseInt(i.css("padding-left"))+parseInt(i.css("padding-right")),h=32,c=0,t=!1,o=function(){var e=a.offset().top,e=Math.max(h,e-c),t=n.innerWidth();e<=h&&782<t?(i.css({width:a.outerWidth()-l}),a.css({height:a.outerHeight()}).addClass("chat-help-sticky")):(i.removeAttr("style"),a.removeAttr("style").removeClass("chat-help-sticky"))},r=function(){t||requestAnimationFrame(function(){o(),t=!1}),t=!0};n.on("scroll resize",e),e()})},T.fn.chat_help_dependency=function(){return this.each(function(){var t,a,o,r,e=T(this),n=e.children("[data-controller]");n.length&&(t=T.chat_help_deps.createRuleset(),a=T.chat_help_deps.createRuleset(),o=[],r=[],n.each(function(){var n=T(this),e=n.data("controller").split("|"),i=n.data("condition").split("|"),l=n.data("value").toString().split("|"),h=!!n.data("depend-global"),c=h?a:t;T.each(e,function(e,t){var a=l[e]||"",e=i[e]||i[0];(c=c.createRule('[data-depend-id="'+t+'"]',e,a)).include(n),(h?r:o).push(t)})}),o.length&&T.chat_help_deps.enable(e,t,o),r.length)&&T.chat_help_deps.enable(S.vars.$body,a,r)})},T.fn.chat_help_field_accordion=function(){return this.each(function(){T(this).find(".chat-help-accordion-title").on("click",function(){var e=T(this),t=e.find(".chat-help-accordion-icon"),e=e.next();t.hasClass("fa-angle-right")?t.removeClass("fa-angle-right").addClass("fa-angle-down"):t.removeClass("fa-angle-down").addClass("fa-angle-right"),e.data("opened")||(e.chat_help_reload_script(),e.data("opened",!0)),e.toggleClass("chat-help-accordion-open")})})},T.fn.chat_help_field_backup=function(){return this.each(function(){var t,a,n,i;m.wp.customize!==y&&(a=T(t=this),T("body"),n=a.find(".chat-help-import"),i=a.find(".chat-help-reset"),t.notificationOverlay=function(){wp.customize.notifications&&wp.customize.OverlayNotification&&(wp.customize.state("saved").get()||(wp.customize.state("changesetStatus").set("trash"),wp.customize.each(function(e){e._dirty=!1}),wp.customize.state("saved").set(!0)),wp.customize.notifications.add(new wp.customize.OverlayNotification("chat_help_field_backup_notification",{type:"default",message:"&nbsp;",loading:!0})))},i.on("click",function(e){e.preventDefault(),S.vars.is_confirm&&(t.notificationOverlay(),m.wp.ajax.post("chat-help-reset",{unique:i.data("unique"),nonce:i.data("nonce")}).done(function(e){m.location.reload(!0)}).fail(function(e){alert(e.error),wp.customize.notifications.remove("chat_help_field_backup_notification")}))}),n.on("click",function(e){e.preventDefault(),S.vars.is_confirm&&(t.notificationOverlay(),m.wp.ajax.post("chat-help-import",{unique:n.data("unique"),nonce:n.data("nonce"),data:a.find(".chat-help-import-data").val()}).done(function(e){m.location.reload(!0)}).fail(function(e){alert(e.error),wp.customize.notifications.remove("chat_help_field_backup_notification")}))}))})},T.fn.chat_help_field_background=function(){return this.each(function(){T(this).find(".chat-help--background-image").chat_help_reload_script()})},T.fn.chat_help_field_code_editor=function(){return this.each(function(){var t,n,e,i,l;"function"==typeof CodeMirror&&(t=T(this),n=t.find("textarea"),e=t.find(".CodeMirror"),i=n.data("editor"),e.length&&e.remove(),l=setInterval(function(){var a,e;t.is(":visible")&&(a=CodeMirror.fromTextArea(n[0],i),"default"!==i.theme&&-1===S.vars.code_themes.indexOf(i.theme)&&(e=T("<link>"),T("#chat-help-codemirror-css").after(e),e.attr({rel:"stylesheet",id:"chat-help-codemirror-"+i.theme+"-css",href:i.cdnURL+"/theme/"+i.theme+".min.css",type:"text/css",media:"all"}),S.vars.code_themes.push(i.theme)),CodeMirror.modeURL=i.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(a,i.mode),a.on("change",function(e,t){n.val(a.getValue()).trigger("change")}),clearInterval(l))}))})},T.fn.chat_help_field_date=function(){return this.each(function(){var e=T(this),a=e.find("input"),n=e.find(".chat-help-date-settings").data("settings"),n=T.extend({},n,{showAnim:"",beforeShow:function(e,t){T(t.dpDiv).addClass("chat-help-datepicker-wrapper")},onClose:function(e,t){T(t.dpDiv).removeClass("chat-help-datepicker-wrapper")}});2===a.length&&(n=T.extend({},n,{onSelect:function(e){T(this),a.first();var t=a.first().attr("id")===T(this).attr("id")?"minDate":"maxDate",e=T.datepicker.parseDate(n.dateFormat,e);a.not(this).datepicker("option",t,e)}})),a.each(function(){var e=T(this);e.hasClass("hasDatepicker")&&e.removeAttr("id").removeClass("hasDatepicker"),e.datepicker(n)})})},T.fn.chat_help_field_datetime=function(){return this.each(function(){var e=T(this),n=e.find("input"),t=e.find(".chat-help-datetime-settings").data("settings"),t=T.extend({},t,{onReady:function(e,t,a){T(a.calendarContainer).addClass("chat-help-flatpickr")}});2===n.length&&(t=T.extend({},t,{onChange:function(e,t,a){"from"===T(a.element).data("type")?n.last().get(0)._flatpickr.set("minDate",e[0]):n.first().get(0)._flatpickr.set("maxDate",e[0])}})),n.each(function(){T(this).flatpickr(t)})})},T.fn.chat_help_field_fieldset=function(){return this.each(function(){T(this).find(".chat-help-fieldset-content").chat_help_reload_script()})},T.fn.chat_help_field_gallery=function(){return this.each(function(){var i,e=T(this),l=e.find(".chat-help-edit-gallery"),h=e.find(".chat-help-clear-gallery"),c=e.find("ul"),o=e.find("input");e.find("img");e.on("click",".chat-help-button, .chat-help-edit-gallery",function(e){var t=T(this),a=o.val(),t=t.hasClass("chat-help-edit-gallery")?"edit":"add",n="add"!=t||a.length?"gallery-edit":"gallery";e.preventDefault(),void 0!==m.wp&&m.wp.media&&m.wp.media.gallery&&("gallery"==n?(i=m.wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0})).open():(i=m.wp.media.gallery.edit('[gallery ids="'+a+'"]'),"add"==t&&i.setState("gallery-library")),i.on("update",function(e){c.empty();e=e.models.map(function(e){var e=e.toJSON(),t=(e.sizes&&e.sizes.thumbnail&&e.sizes.thumbnail.url?e.sizes.thumbnail:e).url;return c.append('<li><img src="'+t+'"></li>'),e.id});o.val(e.join(",")).trigger("change"),h.removeClass("hidden"),l.removeClass("hidden")}))}),h.on("click",function(e){e.preventDefault(),c.empty(),o.val("").trigger("change"),h.addClass("hidden"),l.addClass("hidden")})})},T.fn.chat_help_field_group=function(){return this.each(function(){function e(e){e.preventDefault();var t,a,n,i,e=l.children(".chat-help-cloneable-item").length;c.hide(),p&&p<e+1?h.show():(t=(e=T(this).parent().parent()).children(".chat-help-cloneable-helper").chat_help_clone(!0),a=e.children(".chat-help-cloneable-title").chat_help_clone(),n=e.children(".chat-help-cloneable-content").chat_help_clone(),(i=T('<div class="chat-help-cloneable-item" />')).append(t),i.append(a),i.append(n),l.children().eq(e.index()).after(i),S.helper.name_nested_replace(l.children(".chat-help-cloneable-item"),s),l.accordion("refresh"),l.chat_help_customizer_refresh(),l.chat_help_customizer_listen({closest:!0}),d&&u(l))}function t(e){e.preventDefault(),e=l.children(".chat-help-cloneable-item").length,h.hide(),c.hide(),f&&e-1<f?c.show():(T(this).closest(".chat-help-cloneable-item").remove(),S.helper.name_nested_replace(l.children(".chat-help-cloneable-item"),s),l.chat_help_customizer_refresh(),d&&u(l))}var a=T(this),n=a.children(".chat-help-fieldset"),n=n.length?n:a,l=n.children(".chat-help-cloneable-wrapper"),i=n.children(".chat-help-cloneable-hidden"),h=n.children(".chat-help-cloneable-max"),c=n.children(".chat-help-cloneable-min"),o=l.data("title-by"),r=l.data("title-by-prefix"),s=l.data("field-id"),d=Boolean(Number(l.data("title-number"))),p=parseInt(l.data("max")),f=parseInt(l.data("min")),u=(l.hasClass("ui-accordion")&&l.find(".ui-accordion-header-icon").remove(),function(e){e.find(".chat-help-cloneable-title-number").each(function(e){T(this).html(T(this).closest(".chat-help-cloneable-item").index()+1+".")})});l.accordion({header:"> .chat-help-cloneable-item > .chat-help-cloneable-title",collapsible:!0,active:!1,animate:!1,heightStyle:"content",icons:{header:"chat-help-cloneable-header-icon icofont-rounded-right",activeHeader:"chat-help-cloneable-header-icon icofont-rounded-down"},activate:function(e,t){var n,i,a=t.newPanel,t=t.newHeader;a.length&&!a.data("opened")?(n=t.find(".chat-help-cloneable-value"),i=[],T.each(o,function(e,t){i.push(a.find('[data-depend-id="'+t+'"]'))}),T.each(i,function(e,t){t.on("change keyup chat-help.keyup",function(){var a=[];T.each(i,function(e,t){t=t.val();t&&a.push(t)}),a.length&&n.text(a.join(r))}).trigger("chat-help.keyup")}),a.chat_help_reload_script(),a.data("opened",!0),a.data("retry",!1)):a.data("retry")&&(a.chat_help_reload_script_retry(),a.data("retry",!1))}}),l.sortable({axis:"y",handle:".chat-help-cloneable-title,.chat-help-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(e,t){l.accordion({active:!1}),l.sortable("refreshPositions"),t.item.children(".chat-help-cloneable-content").data("retry",!0)},update:function(e,t){S.helper.name_nested_replace(l.children(".chat-help-cloneable-item"),s),l.chat_help_customizer_refresh(),d&&u(l)}}),n.children(".chat-help-cloneable-add").on("click",function(e){e.preventDefault();var t=l.children(".chat-help-cloneable-item").length;c.hide(),p&&p<t+1?h.show():((e=i.chat_help_clone(!0)).removeClass("chat-help-cloneable-hidden"),e.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(s+"[0]",s+"["+t+"]")}),l.append(e),l.accordion("refresh"),l.accordion({active:t}),l.chat_help_customizer_refresh(),l.chat_help_customizer_listen({closest:!0}),d&&u(l))}),l.children(".chat-help-cloneable-item").children(".chat-help-cloneable-helper").on("click",".chat-help-cloneable-clone",e),n.children(".chat-help-cloneable-hidden").children(".chat-help-cloneable-helper").on("click",".chat-help-cloneable-clone",e);l.children(".chat-help-cloneable-item").children(".chat-help-cloneable-helper").on("click",".chat-help-cloneable-remove",t),n.children(".chat-help-cloneable-hidden").children(".chat-help-cloneable-helper").on("click",".chat-help-cloneable-remove",t)})},T.fn.chat_help_field_icon=function(){return this.each(function(){var a=T(this);a.on("click",".chat-help-icon-add",function(e){e.preventDefault();var e=T(this),t=T("#chat-help-modal-icon");t.removeClass("hidden"),S.vars.$icon_target=a,S.vars.icon_modal_loaded||(t.find(".chat-help-modal-loading").show(),m.wp.ajax.post("chat-help-get-icons",{nonce:e.data("nonce")}).done(function(e){t.find(".chat-help-modal-loading").hide(),S.vars.icon_modal_loaded=!0;var a=t.find(".chat-help-modal-load").html(e.content);a.on("click","i",function(e){e.preventDefault();e=T(this).attr("title");S.vars.$icon_target.find(".chat-help-icon-preview i").removeAttr("class").addClass(e),S.vars.$icon_target.find(".chat-help-icon-preview").removeClass("hidden"),S.vars.$icon_target.find(".chat-help-icon-remove").removeClass("hidden"),S.vars.$icon_target.find("input").val(e).trigger("change"),t.addClass("hidden")}),t.on("change keyup",".chat-help-icon-search",function(){var t=T(this).val();a.find("i").each(function(){var e=T(this);e.attr("title").search(new RegExp(t,"i"))<0?e.hide():e.show()})}),t.on("click",".chat-help-modal-close, .chat-help-modal-overlay",function(){t.addClass("hidden")})}).fail(function(e){t.find(".chat-help-modal-loading").hide(),t.find(".chat-help-modal-load").html(e.error),t.on("click",function(){t.addClass("hidden")})}))}),a.on("click",".chat-help-icon-remove",function(e){e.preventDefault(),a.find(".chat-help-icon-preview").addClass("hidden"),a.find("input").val("").trigger("change"),T(this).addClass("hidden")})})},T.fn.chat_help_field_map=function(){return this.each(function(){var e,t,a,n,i,l,h,c,o,r,s;"undefined"!=typeof L&&(s=(e=T(this)).find(".chat-help--map-osm"),t=e.find(".chat-help--map-search input"),a=e.find(".chat-help--latitude"),n=e.find(".chat-help--longitude"),i=e.find(".chat-help--zoom"),l=s.data("map"),h=L.map(s.get(0),l),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(h),c=L.marker(l.center,{draggable:!0}).addTo(h),o=function(e){a.val(e.lat),n.val(e.lng),i.val(h.getZoom())},h.on("click",function(e){c.setLatLng(e.latlng),o(e.latlng)}),h.on("zoom",function(){o(c.getLatLng())}),c.on("drag",function(){o(c.getLatLng())}),t.length||(t=T('[data-depend-id="'+e.find(".chat-help--address-field").data("address-field")+'"]')),r={},t.autocomplete({source:function(e,t){var a=e.term;a in r?t(r[a]):T.get("https://nominatim.openstreetmap.org/search",{format:"json",q:a},function(e){e=e.length?e.map(function(e){return{value:e.display_name,label:e.display_name,lat:e.lat,lon:e.lon}},"json"):[{value:"no-data",label:"No Results."}];r[a]=e,t(e)})},select:function(e,t){if("no-data"===t.item.value)return!1;t=L.latLng(t.item.lat,t.item.lon);h.panTo(t),c.setLatLng(t),o(t)},create:function(e,t){T(this).autocomplete("widget").addClass("chat-help-map-ui-autocomplate")}}),a.on("change",s=function(){var e=L.latLng(a.val(),n.val());h.panTo(e),c.setLatLng(e)}),n.on("change",s))})},T.fn.chat_help_field_link=function(){return this.each(function(){var n=T(this),e=n.find(".chat-help--link"),i=n.find(".chat-help--add"),l=n.find(".chat-help--edit"),h=n.find(".chat-help--remove"),c=n.find(".chat-help--result"),t=S.helper.uid("chat-help-wplink-textarea-");i.on("click",function(e){e.preventDefault(),m.wpLink.open(t)}),l.on("click",function(e){e.preventDefault(),i.trigger("click"),T("#wp-link-url").val(n.find(".chat-help--url").val()),T("#wp-link-text").val(n.find(".chat-help--text").val()),T("#wp-link-target").prop("checked","_blank"===n.find(".chat-help--target").val())}),h.on("click",function(e){e.preventDefault(),n.find(".chat-help--url").val("").trigger("change"),n.find(".chat-help--text").val(""),n.find(".chat-help--target").val(""),i.removeClass("hidden"),l.addClass("hidden"),h.addClass("hidden"),c.parent().addClass("hidden")}),e.attr("id",t).on("change",function(){var e=m.wpLink.getAttrs(),t=e.href,a=T("#wp-link-text").val(),e=e.target||"";n.find(".chat-help--url").val(t).trigger("change"),n.find(".chat-help--text").val(a),n.find(".chat-help--target").val(e),c.html('{url:"'+t+'", text:"'+a+'", target:"'+e+'"}'),i.addClass("hidden"),l.removeClass("hidden"),h.removeClass("hidden"),c.parent().removeClass("hidden")})})},T.fn.chat_help_field_media=function(){return this.each(function(){var a,n=T(this),i=n.find(".chat-help--button"),l=n.find(".chat-help--remove"),h=i.data("library")&&i.data("library").split(",")||"",c=!!n.hasClass("chat-help-assign-field-background")&&n.closest(".chat-help-field-background").find(".chat-help--auto-attributes");i.on("click",function(e){e.preventDefault(),void 0!==m.wp&&m.wp.media&&m.wp.media.gallery&&(a||(a=m.wp.media({library:{type:h}})).on("select",function(){var e=a.state().get("selection").first().attributes,t=i.data("preview-size")||"thumbnail";h.length&&-1===h.indexOf(e.subtype)&&-1===h.indexOf(e.type)||(n.find(".chat-help--id").val(e.id),n.find(".chat-help--width").val(e.width),n.find(".chat-help--height").val(e.height),n.find(".chat-help--alt").val(e.alt),n.find(".chat-help--title").val(e.title),n.find(".chat-help--description").val(e.description),t=void 0!==e.sizes&&void 0!==e.sizes.thumbnail&&"thumbnail"===t?e.sizes.thumbnail.url:void 0!==e.sizes&&void 0!==e.sizes.full?e.sizes.full.url:"image"===e.type?e.url:e.icon,c&&c.removeClass("chat-help--attributes-hidden"),l.removeClass("hidden"),n.find(".chat-help--preview").removeClass("hidden"),n.find(".chat-help--src").attr("src",t),n.find(".chat-help--thumbnail").val(t),n.find(".chat-help--url").val(e.url).trigger("change"))}),a.open())}),l.on("click",function(e){e.preventDefault(),c&&c.addClass("chat-help--attributes-hidden"),l.addClass("hidden"),n.find("input").val(""),n.find(".chat-help--preview").addClass("hidden"),n.find(".chat-help--url").trigger("change")})})},T.fn.chat_help_field_repeater=function(){return this.each(function(){function e(e){e.preventDefault();var t,a,n,e=i.children(".chat-help-repeater-item").length;c.hide(),r&&r<e+1?h.show():(t=(e=T(this).parent().parent().parent()).children(".chat-help-repeater-content").chat_help_clone(),a=e.children(".chat-help-repeater-helper").chat_help_clone(!0),(n=T('<div class="chat-help-repeater-item" />')).append(t),n.append(a),i.children().eq(e.index()).after(n),n.children(".chat-help-repeater-content").chat_help_reload_script(),S.helper.name_nested_replace(i.children(".chat-help-repeater-item"),o),i.chat_help_customizer_refresh(),i.chat_help_customizer_listen({closest:!0}))}function t(e){e.preventDefault(),e=i.children(".chat-help-repeater-item").length,h.hide(),c.hide(),s&&e-1<s?c.show():(T(this).closest(".chat-help-repeater-item").remove(),S.helper.name_nested_replace(i.children(".chat-help-repeater-item"),o),i.chat_help_customizer_refresh())}var a=T(this),n=a.children(".chat-help-fieldset"),n=n.length?n:a,i=n.children(".chat-help-repeater-wrapper"),l=n.children(".chat-help-repeater-hidden"),h=n.children(".chat-help-repeater-max"),c=n.children(".chat-help-repeater-min"),o=i.data("field-id"),r=parseInt(i.data("max")),s=parseInt(i.data("min"));i.children(".chat-help-repeater-item").children(".chat-help-repeater-content").chat_help_reload_script(),i.sortable({axis:"y",handle:".chat-help-repeater-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,t){S.helper.name_nested_replace(i.children(".chat-help-repeater-item"),o),i.chat_help_customizer_refresh(),t.item.chat_help_reload_script_retry()}}),n.children(".chat-help-repeater-add").on("click",function(e){e.preventDefault();var t=i.children(".chat-help-repeater-item").length;c.hide(),r&&r<t+1?h.show():((e=l.chat_help_clone(!0)).removeClass("chat-help-repeater-hidden"),e.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(o+"[0]",o+"["+t+"]")}),i.append(e),e.children(".chat-help-repeater-content").chat_help_reload_script(),i.chat_help_customizer_refresh(),i.chat_help_customizer_listen({closest:!0}))}),i.children(".chat-help-repeater-item").children(".chat-help-repeater-helper").on("click",".chat-help-repeater-clone",e),n.children(".chat-help-repeater-hidden").children(".chat-help-repeater-helper").on("click",".chat-help-repeater-clone",e);i.children(".chat-help-repeater-item").children(".chat-help-repeater-helper").on("click",".chat-help-repeater-remove",t),n.children(".chat-help-repeater-hidden").children(".chat-help-repeater-helper").on("click",".chat-help-repeater-remove",t)})},T.fn.chat_help_field_slider=function(){return this.each(function(){var e=T(this),a=e.find("input"),t=e.find(".chat-help-slider-ui"),e=a.data(),n=a.val()||0;t.hasClass("ui-slider")&&t.empty(),t.slider({range:"min",value:n,min:e.min||0,max:e.max||100,step:e.step||1,slide:function(e,t){a.val(t.value).trigger("change")}}),a.on("keyup",function(){t.slider("value",a.val())})})},T.fn.chat_help_field_sortable=function(){return this.each(function(){var a=T(this).find(".chat-help-sortable");a.sortable({axis:"y",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,t){a.chat_help_customizer_refresh()}}),a.find(".chat-help-sortable-content").chat_help_reload_script()})},T.fn.chat_help_field_sorter=function(){return this.each(function(){var n=T(this),e=n.find(".chat-help-enabled"),t=n.find(".chat-help-disabled"),t=!!t.length&&t;e.sortable({connectWith:t,placeholder:"ui-sortable-placeholder",update:function(e,t){var a=t.item.find("input");t.item.parent().hasClass("chat-help-enabled")?a.attr("name",a.attr("name").replace("disabled","enabled")):a.attr("name",a.attr("name").replace("enabled","disabled")),n.chat_help_customizer_refresh()}}),t&&t.sortable({connectWith:e,placeholder:"ui-sortable-placeholder",update:function(e,t){n.chat_help_customizer_refresh()}})})},T.fn.chat_help_field_spinner=function(){return this.each(function(){var e=T(this),a=e.find("input"),e=e.find(".ui-button"),n=a.data();e.length&&e.remove(),a.spinner({min:n.min||0,max:n.max||100,step:n.step||1,create:function(e,t){n.unit&&a.after('<span class="ui-button chat-help--unit">'+n.unit+"</span>")},spin:function(e,t){a.val(t.value).trigger("change")}})})},T.fn.chat_help_field_switcher=function(){return this.each(function(){var a=T(this).find(".chat-help--switcher");a.on("click",function(){var e=0,t=a.find("input");a.hasClass("chat-help--active")?a.removeClass("chat-help--active"):(e=1,a.addClass("chat-help--active")),t.val(e).trigger("change")})})},T.fn.chat_help_field_tabbed=function(){return this.each(function(){var e=T(this),t=e.find(".chat-help-tabbed-nav a"),a=e.find(".chat-help-tabbed-content");a.eq(0).chat_help_reload_script(),t.on("click",function(e){e.preventDefault();var e=T(this),t=e.index(),t=a.eq(t);e.addClass("chat-help-tabbed-active").siblings().removeClass("chat-help-tabbed-active"),t.chat_help_reload_script(),t.removeClass("hidden").siblings().addClass("hidden")})})},T.fn.chat_help_field_group_field_section_tab=function(){return this.each(function(){var e=T(this),t=e.find(".chat-help-section_tab-nav a"),a=e.find(".chat-help-section_tab-content");a.eq(0).chat_help_reload_script(),t.on("click",function(e){e.preventDefault();var e=T(this),t=e.index(),t=a.eq(t);e.addClass("chat-help-section_tab-active").siblings().removeClass("chat-help-section_tab-active"),t.chat_help_reload_script(),t.removeClass("hidden").siblings().addClass("hidden")})})},T.fn.chat_help_field_typography=function(){return this.each(function(){var x=this,z=T(this),n=[],D=chat_help_typography_json.webfonts,t=chat_help_typography_json.googlestyles,O=chat_help_typography_json.defaultstyles;x.sanitize_subset=function(e){return e=(e=e.replace("-ext"," Extended")).charAt(0).toUpperCase()+e.slice(1)},x.sanitize_style=function(e){return t[e]||e},x.load_google_font=function(e,t,a){e&&"object"==typeof WebFont&&(t=t?t.replace("normal",""):"",a=a?a.replace("normal",""):"",-1===n.indexOf(e=t||a?e+":"+t+a:e)&&WebFont.load({google:{families:[e]}}),n.push(e))},x.append_select_options=function(e,t,i,l,h){e.find("option").not(":first").remove();var c="";T.each(t,function(e,t){var a=t,n=h?i&&-1!==i.indexOf(t)?" selected":"":i&&i===t?" selected":"";"subset"===l?a=x.sanitize_subset(t):"style"===l&&(a=x.sanitize_style(t)),c+='<option value="'+t+'"'+n+">"+a+"</option>"}),e.append(c).trigger("chat-help.change").trigger("chosen:updated")},x.init=function(){var l,h,c,o,r,s,d,p,_,f=[],e=z.find(".chat-help--typography"),u=z.find(".chat-help--type"),g=z.find(".chat-help--block-font-style"),v=e.data("unit"),m=e.data("line-height-unit"),t=e.data("exclude")?e.data("exclude").split(","):[],b=(z.find(".chat-help--chosen").length&&z.find("select").each(function(){var e=T(this),t=e.parent().find(".chosen-container");t.length&&t.remove(),e.chosen({allow_single_deselect:!0,disable_search_threshold:15,width:"100%"})}),z.find(".chat-help--font-family")),n=b.val(),i=(b.find("option").not(":first-child").remove(),""),y=(T.each(D,function(a,e){t&&-1!==t.indexOf(a)||(i+='<optgroup label="'+e.label+'">',T.each(e.fonts,function(e,t){i+='<option value="'+(t="object"==typeof t?e:t)+'" data-type="'+a+'"'+(t===n?" selected":"")+">"+t+"</option>"}),i+="</optgroup>")}),b.append(i).trigger("chosen:updated"),z.find(".chat-help--block-font-style")),w=(y.length&&(l=z.find(".chat-help--font-style-select"),h=l.val()?l.val().replace(/normal/g,""):"",l.on("change chat-help.change",function(e){var t=l.val(),a=(t=!t&&f&&-1===f.indexOf("normal")?f[0]:t)&&"italic"!==t&&"normal"===t?"normal":"",a=t&&"italic"!==t&&"normal"!==t?t.replace("italic",""):a,t=t&&"italic"===t.substr(-6)?"italic":"";z.find(".chat-help--font-weight").val(a),z.find(".chat-help--font-style").val(t)}),(c=z.find(".chat-help--block-extra-styles")).length)&&(o=z.find(".chat-help--extra-styles"),r=o.val()),z.find(".chat-help--block-subset")),C=(w.length&&(s=z.find(".chat-help--subset"),d=s.val(),p=s.data("multiple")||!1),z.find(".chat-help--block-backup-font-family")),k=(b.on("change chat-help.change",function(e){w.length&&w.addClass("hidden"),c.length&&c.addClass("hidden"),C.length&&C.addClass("hidden");var t,a,n=b.find(":selected"),i=n.val(),n=n.data("type");n&&i?("google"!==n&&"custom"!==n||!C.length||C.removeClass("hidden"),y.length&&(a=O,"google"===n&&D[n].fonts[i][0]?a=D[n].fonts[i][0]:"custom"===n&&D[n].fonts[i]&&(a=D[n].fonts[i]),t=-1!==(f=a).indexOf("normal")?"normal":a[0],t=h&&-1!==a.indexOf(h)?h:t,x.append_select_options(l,a,t,"style"),h=!1,y.removeClass("hidden"),"google"===n)&&c.length&&1<a.length&&(x.append_select_options(o,a,r,"style",!0),r=!1,c.removeClass("hidden")),"google"===n&&w.length&&D[n].fonts[i][1]&&(a=(t=D[n].fonts[i][1]).length<2&&"latin"!==t[0]?t[0]:"",i=d&&-1!==t.indexOf(d)?d:a,i=p&&d?d:i,x.append_select_options(s,t,i,"subset",p),d=!1,w.removeClass("hidden"))):(g.find(":input").val(""),w.length&&(s.find("option").not(":first-child").remove(),s.trigger("chosen:updated")),y.length&&(l.find("option").not(":first-child").remove(),l.trigger("chosen:updated"))),u.val(n)}).trigger("chat-help.change"),z.find(".chat-help--block-preview"));k.length&&(_=z.find(".chat-help--preview"),z.on("change",S.helper.debounce(function(e){k.removeClass("hidden");var t=b.val(),a=z.find(".chat-help--font-weight").val(),n=z.find(".chat-help--font-style").val(),i=z.find(".chat-help--font-size").val(),l=z.find(".chat-help--font-variant").val(),h=z.find(".chat-help--line-height").val(),c=z.find(".chat-help--text-align").val(),o=z.find(".chat-help--text-transform").val(),r=z.find(".chat-help--text-decoration").val(),s=z.find(".chat-help--color").val(),d=z.find(".chat-help--word-spacing").val(),p=z.find(".chat-help--letter-spacing").val(),f=z.find(".chat-help--custom-style").val(),u=("google"===z.find(".chat-help--type").val()&&x.load_google_font(t,a,n),{});t&&(u.fontFamily=t),a&&(u.fontWeight=a),n&&(u.fontStyle=n),l&&(u.fontVariant=l),i&&(u.fontSize=i+v),h&&(u.lineHeight=h+m),p&&(u.letterSpacing=p+v),d&&(u.wordSpacing=d+v),c&&(u.textAlign=c),o&&(u.textTransform=o),r&&(u.textDecoration=r),s&&(u.color=s),_.removeAttr("style"),f&&_.attr("style",f),_.css(u)},100)),k.on("click",function(){_.toggleClass("chat-help--black-background");var e=k.find(".chat-help--toggle");e.hasClass("fa-toggle-off")?e.removeClass("fa-toggle-off").addClass("fa-toggle-on"):e.removeClass("fa-toggle-on").addClass("fa-toggle-off")}),k.hasClass("hidden")||z.trigger("change"))},x.init()})},T.fn.chat_help_field_upload=function(){return this.each(function(){var t,e=T(this),a=e.find("input"),n=e.find(".chat-help--button"),i=e.find(".chat-help--remove"),l=e.find(".chat-help--preview"),h=e.find(".chat-help--src"),c=n.data("library")&&n.data("library").split(",")||"";n.on("click",function(e){e.preventDefault(),void 0!==m.wp&&m.wp.media&&m.wp.media.gallery&&(t||(t=m.wp.media({library:{type:c}})).on("select",function(){var e=t.state().get("selection").first().attributes;c.length&&-1===c.indexOf(e.subtype)&&-1===c.indexOf(e.type)||a.val(e.url).trigger("change")}),t.open())}),i.on("click",function(e){e.preventDefault(),a.val("").trigger("change")}),a.on("change",function(e){var t=a.val();t?i.removeClass("hidden"):i.addClass("hidden"),l.length&&(-1!==T.inArray(t.split(".").pop().toLowerCase(),["jpg","jpeg","gif","png","svg","webp"])?(l.removeClass("hidden"),h.attr("src",t)):l.addClass("hidden"))})})},T.fn.chat_help_field_wp_editor=function(){return this.each(function(){var e,t,a,n,i,l,h,c;void 0!==m.wp.editor&&void 0!==m.tinyMCEPreInit&&void 0!==m.tinyMCEPreInit.mceInit.chat_help_wp_editor&&(t=(e=T(this)).find(".chat-help-wp-editor"),a=e.find("textarea"),(e.find(".wp-editor-wrap").length||e.find(".mce-container").length)&&(t.empty(),t.append(a),a.css("display","")),n=S.helper.uid("chat-help-editor-"),a.attr("id",n),i={tinymce:m.tinyMCEPreInit.mceInit.chat_help_wp_editor,quicktags:m.tinyMCEPreInit.qtInit.chat_help_wp_editor},l=t.data("editor-settings"),(c=wp.oldEditor||wp.editor)&&c.hasOwnProperty("autop")&&(wp.editor.autop=c.autop,wp.editor.removep=c.removep,wp.editor.initialize=c.initialize),i.tinymce=T.extend({},i.tinymce,{selector:"#"+n,setup:function(t){t.on("change keyup",function(){var e=l.wpautop?t.getContent():wp.editor.removep(t.getContent());a.val(e).trigger("change")})}}),!1===l.tinymce&&(i.tinymce=!1,t.addClass("chat-help-no-tinymce")),!1===l.quicktags&&(i.quicktags=!1,t.addClass("chat-help-no-quicktags")),h=setInterval(function(){e.is(":visible")&&(m.wp.editor.initialize(n,i),clearInterval(h))}),l.media_buttons)&&m.chat_help_media_buttons&&((c=t.find(".wp-media-buttons")).length?c.find(".chat-help-shortcode-button").data("editor-id",n):((c=T(m.chat_help_media_buttons)).find(".chat-help-shortcode-button").data("editor-id",n),t.prepend(c)))})},T.fn.chat_help_confirm=function(){return this.each(function(){T(this).on("click",function(e){var t=T(this).data("confirm")||m.chat_help_vars.i18n.confirm;if(!confirm(t))return e.preventDefault(),!1;S.vars.is_confirm=!0,S.vars.form_modified=!1})})},T.fn.serializeObject=function(){var n={};return T.each(this.serializeArray(),function(e,t){var a=t.name,t=t.value;n[a]=n[a]===y?t:T.isArray(n[a])?n[a].concat(t):[n[a],t]}),n},T.fn.chat_help_save=function(){return this.each(function(){var n,i=T(this),l=T(".chat-help-save"),h=T(".chat-help-options"),c=!1;i.on("click",function(e){var t,a;c||(t=i.data("save"),a=i.val(),l.attr("value",t),i.hasClass("chat-help-save-ajax")?(e.preventDefault(),h.addClass("chat-help-saving"),l.prop("disabled",!0),m.wp.ajax.post("chat_help_"+h.data("unique")+"_ajax_save",{data:T("#chat-help-form").serializeJSON_chat_help()}).done(function(e){T(".chat-help-error").remove(),Object.keys(e.errors).length&&(i='<i class="chat-help-label-error chat-help-error">!</i>',T.each(e.errors,function(e,t){var e=T('[data-depend-id="'+e+'"]'),a=T('a[href="#tab='+e.closest(".chat-help-section").data("section-id")+'"]'),n=a.closest(".chat-help-tab-item");e.closest(".chat-help-fieldset").append('<p class="chat-help-error chat-help-error-text">'+t+"</p>"),a.find(".chat-help-error").length||a.append(i),n.find(".chat-help-arrow .chat-help-error").length||n.find(".chat-help-arrow").append(i)})),h.removeClass("chat-help-saving"),l.prop("disabled",!1).attr("value",a),c=!1,S.vars.form_modified=!1,S.vars.$form_warning.hide(),clearTimeout(n);var i,t=T(".chat-help-form-success");t.empty().append(e.notice).fadeIn("fast",function(){n=setTimeout(function(){t.fadeOut("fast")},1e3)})}).fail(function(e){alert(e.error)})):S.vars.form_modified=!1),c=!0})})},T.fn.chat_help_options=function(){return this.each(function(){var e=T(this),t=e.find(".chat-help-content"),a=e.find(".chat-help-form-success"),n=e.find(".chat-help-form-warning"),i=e.find(".chat-help-header .chat-help-save");(S.vars.$form_warning=n).length&&(m.onbeforeunload=function(){return!!S.vars.form_modified||y},t.on("change keypress",":input",function(){S.vars.form_modified||(a.hide(),n.fadeIn("fast"),S.vars.form_modified=!0)})),a.hasClass("chat-help-form-show")&&setTimeout(function(){a.fadeOut("fast")},1e3),T(b).keydown(function(e){if((e.ctrlKey||e.metaKey)&&83===e.which)return i.trigger("click"),e.preventDefault(),!1})})},T.fn.chat_help_taxonomy=function(){return this.each(function(){var e,t,a=T(this),n=a.parents("form");"addtag"===n.attr("id")&&(e=n.find("#submit"),t=a.find(".chat-help-field").chat_help_clone(),e.on("click",function(){n.find(".form-required").hasClass("form-invalid")||(a.data("inited",!1),a.empty(),a.html(t),t=t.chat_help_clone(),a.chat_help_reload_script())}))})},T.fn.chat_help_shortcode=function(){var v=this;return v.shortcode_parse=function(e,a){var n="";return T.each(e,function(e,t){n+="["+(a=a||e),T.each(t,function(e,t){"content"===e?n=(n+="]")+t+"[/"+a:n+=v.shortcode_tags(e,t)}),n+="]"}),n},v.shortcode_tags=function(e,t){var a="";return""!==t&&("object"!=typeof t||T.isArray(t)?a+=" "+e+'="'+t.toString()+'"':T.each(t,function(e,t){""!==(t="background-image"===e?t.url||"":t)&&(a+=" "+e+'="'+t.toString()+'"')})),a},v.insertAtChars=function(e,t){e=void 0!==e[0].name?e[0]:e;return e.value.length&&void 0!==e.selectionStart?(e.focus(),e.value.substring(0,e.selectionStart)+t+e.value.substring(e.selectionEnd,e.value.length)):(e.focus(),t)},v.send_to_editor=function(e,t){var a;(a="undefined"!=typeof tinymce?tinymce.get(t):a)&&!a.isHidden()?a.execCommand("mceInsertContent",!1,e):(a=T("#"+t)).val(v.insertAtChars(a,e)).trigger("change")},this.each(function(){var i,l,h,a,c,o,r,n,s,d=T(this),p=d.find(".chat-help-modal-load"),f=(d.find(".chat-help-modal-content"),d.find(".chat-help-modal-insert")),u=d.find(".chat-help-modal-loading"),t=d.find("select"),_=d.data("modal-id"),g=d.data("nonce");T(b).on("click",'.chat-help-shortcode-button[data-modal-id="'+_+'"]',function(e){e.preventDefault(),s=T(this),i=s.data("editor-id")||!1,l=s.data("target-id")||!1,h=s.data("gutenberg-id")||!1,d.removeClass("hidden"),d.hasClass("chat-help-shortcode-single")&&c===y&&t.trigger("change")}),t.on("change",function(){var e=T(this),t=e.find(":selected");a=e.val(),c=t.data("shortcode"),o=t.data("view")||"normal",r=t.data("group")||c,p.empty(),a?(u.show(),m.wp.ajax.post("chat-help-get-shortcode-"+_,{shortcode_key:a,nonce:g}).done(function(e){u.hide();e=T(e.content).appendTo(p);f.parent().removeClass("hidden"),n=e.find(".chat-help--repeat-shortcode").chat_help_clone(),e.chat_help_reload_script(),e.find(".chat-help-fields").chat_help_reload_script()})):f.parent().addClass("hidden")}),f.on("click",function(e){if(e.preventDefault(),!f.prop("disabled")&&!f.attr("disabled")){var a="",t=d.find(".chat-help-field:not(.chat-help-depend-on)").find(":input:not(.ignore)").serializeObject_chat_help();switch(o){case"contents":var n=c?t[c]:t;T.each(n,function(e,t){e=c||e;a+="["+e+"]"+t+"[/"+e+"]"});break;case"group":a+="["+c,T.each(t[c],function(e,t){a+=v.shortcode_tags(e,t)}),a=(a=(a+="]")+v.shortcode_parse(t[r],r))+("[/"+c+"]");break;case"repeater":a+=v.shortcode_parse(t[r],r);break;default:a+=v.shortcode_parse(t)}a=""===a?"["+c+"]":a,h?(e=m.chat_help_gutenberg_props.attributes.hasOwnProperty("shortcode")?m.chat_help_gutenberg_props.attributes.shortcode:"",m.chat_help_gutenberg_props.setAttributes({shortcode:e+a})):i?v.send_to_editor(a,i):(e=l?T(l):s.parent().find("textarea")).val(v.insertAtChars(e,a)).trigger("change"),d.addClass("hidden")}}),d.on("click",".chat-help--repeat-button",function(e){e.preventDefault();var e=d.find(".chat-help--repeatable"),t=n.chat_help_clone(),a=t.find(".chat-help-repeat-remove");t.appendTo(e);t.find(".chat-help-fields").chat_help_reload_script(),S.helper.name_nested_replace(d.find(".chat-help--repeat-shortcode"),r),a.on("click",function(){t.remove(),S.helper.name_nested_replace(d.find(".chat-help--repeat-shortcode"),r)})}),d.on("click",".chat-help-modal-close, .chat-help-modal-overlay",function(){d.addClass("hidden")})})},"function"==typeof Color&&(Color.prototype.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var t=6-e.length-1;0<=t;t--)e="0"+e;return"#"+e}),S.funcs.parse_color=function(e){var e=e.replace(/\s+/g,""),t=-1!==e.indexOf("rgba")?parseFloat(100*e.replace(/^.*,(.+)\)/,"$1")):100;return{value:e,transparent:t,rgba:t<100}},T.fn.chat_help_color=function(){return this.each(function(){var h,c=T(this),a=S.funcs.parse_color(c.val()),e=!m.chat_help_vars.color_palette.length||m.chat_help_vars.color_palette;c.hasClass("wp-color-picker")&&c.closest(".wp-picker-container").after(c).remove(),c.wpColorPicker({palettes:e,change:function(e,t){t=t.color.toString();h.removeClass("chat-help--transparent-active"),h.find(".chat-help--transparent-offset").css("background-color",t),c.val(t).trigger("change")},create:function(){h=c.closest(".wp-picker-container");var n=c.data("a8cIris"),e=T('<div class="chat-help--transparent-wrap"><div class="chat-help--transparent-slider"></div><div class="chat-help--transparent-offset"></div><div class="chat-help--transparent-text"></div><div class="chat-help--transparent-button">transparent <i class="icofont-toggle-off"></i></div></div>').appendTo(h.find(".wp-picker-holder")),i=e.find(".chat-help--transparent-slider"),l=e.find(".chat-help--transparent-text"),t=e.find(".chat-help--transparent-offset"),e=e.find(".chat-help--transparent-button");"transparent"===c.val()&&h.addClass("chat-help--transparent-active"),e.on("click",function(){"transparent"!==c.val()?(c.val("transparent").trigger("change").removeClass("iris-error"),h.addClass("chat-help--transparent-active")):(c.val(n._color.toString()).trigger("change"),h.removeClass("chat-help--transparent-active"))}),i.slider({value:a.transparent,step:1,min:0,max:100,slide:function(e,t){t=parseFloat(t.value/100);n._color._alpha=t,c.wpColorPicker("color",n._color.toString()),l.text(1===t||0===t?"":t)},create:function(){var e=parseFloat(a.transparent/100);l.text(e<1?e:""),t.css("background-color",a.value),h.on("click",".wp-picker-clear",function(){n._color._alpha=1,l.text(""),i.slider("option","value",100),h.removeClass("chat-help--transparent-active"),c.trigger("change")}),h.on("click",".wp-picker-default",function(){var e=S.funcs.parse_color(c.data("default-color")),t=parseFloat(e.transparent/100),a=t<1?t:"";n._color._alpha=t,l.text(a),i.slider("option","value",e.transparent),"transparent"===e.value&&(c.removeClass("iris-error"),h.addClass("chat-help--transparent-active"))})}})}})})},T.fn.chat_help_chosen=function(){return this.each(function(){var a,l,h=T(this),e=h.parent().find(".chosen-container"),t=h.hasClass("chat-help-chosen-sortable")||!1,n=h.hasClass("chat-help-chosen-ajax")||!1,i=h.attr("multiple")||!1,c=T.extend({allow_single_deselect:!0,disable_search_threshold:10,width:i?"100%":"auto",no_results_text:m.chat_help_vars.i18n.no_results_text},h.data("chosen-settings"));e.length&&e.remove(),n?(e=T.extend({data:{type:"post",nonce:""},allow_single_deselect:!0,disable_search_threshold:-1,width:"100%",min_length:3,type_delay:500,typing_text:m.chat_help_vars.i18n.typing_text,searching_text:m.chat_help_vars.i18n.searching_text,no_results_text:m.chat_help_vars.i18n.no_results_text},h.data("chosen-settings")),h.chat_help_AjaxChosen(e)):h.chosen(c),i&&(n=(a=h.parent().find(".chat-help-hide-select")).val()||[],h.on("change",function(e,t){t&&t.selected?a.append('<option value="'+t.selected+'" selected="selected">'+t.selected+"</option>"):t&&t.deselected&&a.find('option[value="'+t.deselected+'"]').remove(),m.wp.customize!==y&&0===a.children().length&&a.data("customize-setting-link")&&m.wp.customize.control(a.data("customize-setting-link")).setting.set(""),a.trigger("change")}),h.chat_help_ChosenOrder(n,!0)),t&&((l=h.parent().find(".chosen-container").find(".chosen-choices")).bind("mousedown",function(e){T(e.target).is("span")&&e.stopPropagation()}),l.sortable({items:"li:not(.search-field)",helper:"orginal",cursor:"move",placeholder:"search-choice-placeholder",start:function(e,t){t.placeholder.width(t.item.innerWidth()),t.placeholder.height(t.item.innerHeight())},update:function(e,t){var n="",i=h.data("chosen"),a=h.parent().find(".chat-help-hide-select");l.find(".search-choice-close").each(function(){var a=T(this).data("option-array-index");T.each(i.results_data,function(e,t){t.array_index===a&&(n+='<option value="'+t.value+'" selected>'+t.value+"</option>")})}),a.children().remove(),a.append(n),a.trigger("change")}}))})},T.fn.chat_help_checkbox=function(){return this.each(function(){var e=T(this),t=e.find(".chat-help--input"),a=e.find(".chat-help--checkbox");a.on("click",function(){t.val(Number(a.prop("checked"))).trigger("change")})})},T.fn.chat_help_checkbox_all=function(){return this.each(function(){var a=T(this);a.on("click",function(){var e=a.closest(".chat-help-field-checkbox").find(":input"),t=!1;e.each(function(){T(this).prop("checked")||(t=!0)}),t?(e.prop("checked","checked"),e.attr("checked","checked")):(e.prop("checked",""),e.removeAttr("checked")),e.first().trigger("change")})})},T.fn.chat_help_siblings=function(){return this.each(function(){var t=T(this),e=t.find(".chat-help--sibling:not(.chat-help-pro-only)"),a=t.data("multiple")||!1;t.find(".chat-help--sibling.chat-help-pro-only").find("input").prop("disable",!0),e.on("click",function(){var e=T(this);a?(e.hasClass("chat-help--active")?(e.removeClass("chat-help--active"),e.find("input").prop("checked",!1)):(e.addClass("chat-help--active"),e.find("input").prop("checked",!0))).trigger("change"):(t.find("input").prop("checked",!1),e.find("input").prop("checked",!0).trigger("change"),e.addClass("chat-help--active").siblings().removeClass("chat-help--active"))})})},T.fn.chat_help_help=function(){return this.each(function(){var t,a,n=T(this);n.on({mouseenter:function(){t=T('<div class="chat-help-tooltip"></div>').html(n.find(".chat-help-help-text").html()).appendTo("body"),a=S.vars.is_rtl?n.offset().left-t.outerWidth():n.offset().left+32;var e=n.offset().top-(t.outerHeight()/2-6);0<n.find(".chat-help-tooltip").length&&(e=n.offset().top+46,a=n.offset().left-249),T(t).addClass("chat-help-tooltip-hover-effect"),t.css({top:e,left:a,textAlign:"left"})},mouseleave:function(){t.is(":hover")||(T(this).removeClass("chat-help-tooltip-hover-effect"),t.addClass("chat-help-fade-out"),t.on("transitionend",function(){t.remove()}))}}),T("body").on("mouseleave",".chat-help-tooltip",function(){t!==y&&(T(this).removeClass("chat-help-tooltip-hover-effect"),t.addClass("chat-help-fade-out"),t.on("transitionend",function(){t.remove()}))})})},T.fn.chat_help_customizer_refresh=function(){return this.each(function(){var e=T(this),t=e.closest(".chat-help-customize-complex");if(t.length){var a=t.data("unique-id");if(a===y)return;var n=t.find(":input"),t=t.data("option-id"),n=n.serializeObject_chat_help(),n=!T.isEmptyObject(n)&&n[a]&&n[a][t]?n[a][t]:"",a=m.wp.customize.control(a+"["+t+"]");a.setting._value=null,a.setting.set(n)}else e.find(":input").first().trigger("change");T(b).trigger("chat-help-customizer-refresh",e)})},T.fn.chat_help_customizer_listen=function(e){var i=T.extend({closest:!1},e);return this.each(function(){var t,e,a,n;m.wp.customize!==y&&(e=(t=i.closest?T(this).closest(".chat-help-customize-complex"):T(this)).find(":input"),a=t.data("unique-id"),n=t.data("option-id"),a!==y)&&e.on("change keyup chat-help.change",function(){var e=t.find(":input").serializeObject_chat_help(),e=!T.isEmptyObject(e)&&e[a]&&e[a][n]?e[a][n]:"";m.wp.customize.control(a+"["+n+"]").setting.set(e)})})},T(b).on("expanded",".control-section",function(){var e,t,a=T(this);a.hasClass("open")&&!a.data("inited")&&(e=a.find(".chat-help-customize-field"),t=a.find(".chat-help-customize-complex"),e.length&&(a.chat_help_dependency(),e.chat_help_reload_script({dependency:!1}),t.chat_help_customizer_listen()),a.data("inited",!0))}),S.vars.$window.on("resize chat-help.resize",S.helper.debounce(function(e){(-1<navigator.userAgent.indexOf("AppleWebKit/")?S.vars.$window.width():m.innerWidth)<=782&&!S.vars.onloaded&&(T(".chat-help-section").chat_help_reload_script(),S.vars.onloaded=!0)},200)).trigger("chat-help.resize"),T.fn.chat_help_widgets=function(){return this.each(function(){T(b).on("widget-added widget-updated",function(e,t){t=t.find(".chat-help-fields");t.length&&t.chat_help_reload_script()}),T(b).on("click",".widget-top",function(e){var t=T(this).parent().find(".chat-help-fields");t.length&&t.chat_help_reload_script()}),T(".widgets-sortables, .control-section-sidebar").on("sortstop",function(e,t){t.item.find(".chat-help-fields").chat_help_reload_script_retry()})})},T.fn.chat_help_nav_menu=function(){return this.each(function(){var e=T(this);e.on("click","a.item-edit",function(){T(this).closest("li.menu-item").find(".chat-help-fields").chat_help_reload_script()}),e.on("sortstop",function(e,t){t.item.find(".chat-help-fields").chat_help_reload_script_retry()})})},T.fn.chat_help_reload_script_retry=function(){return this.each(function(){var e=T(this);e.data("inited")&&e.children(".chat-help-field-wp_editor").chat_help_field_wp_editor()})},T.fn.chat_help_reload_script=function(e){var t=T.extend({dependency:!0},e);return this.each(function(){var e=T(this);e.data("inited")||(e.children(".chat-help-field-accordion").chat_help_field_accordion(),e.children(".chat-help-field-backup").chat_help_field_backup(),e.children(".chat-help-field-background").chat_help_field_background(),e.children(".chat-help-field-code_editor").chat_help_field_code_editor(),e.children(".chat-help-field-date").chat_help_field_date(),e.children(".chat-help-field-datetime").chat_help_field_datetime(),e.children(".chat-help-field-fieldset").chat_help_field_fieldset(),e.children(".chat-help-field-gallery").chat_help_field_gallery(),e.children(".chat-help-field-group").chat_help_field_group(),e.children(".chat-help-field-icon").chat_help_field_icon(),e.children(".chat-help-field-link").chat_help_field_link(),e.children(".chat-help-field-media").chat_help_field_media(),e.children(".chat-help-field-map").chat_help_field_map(),e.children(".chat-help-field-repeater").chat_help_field_repeater(),e.children(".chat-help-field-slider").chat_help_field_slider(),e.children(".chat-help-field-sortable").chat_help_field_sortable(),e.children(".chat-help-field-sorter").chat_help_field_sorter(),e.children(".chat-help-field-spinner").chat_help_field_spinner(),e.children(".chat-help-field-switcher").chat_help_field_switcher(),e.children(".chat-help-field-section_tab").chat_help_field_group_field_section_tab(),e.children(".chat-help-field-tabbed").chat_help_field_tabbed(),e.children(".chat-help-field-typography").chat_help_field_typography(),e.children(".chat-help-field-upload").chat_help_field_upload(),e.children(".chat-help-field-wp_editor").chat_help_field_wp_editor(),e.children(".chat-help-field-border").find(".chat-help-color").chat_help_color(),e.children(".chat-help-field-background").find(".chat-help-color").chat_help_color(),e.children(".chat-help-field-color").find(".chat-help-color").chat_help_color(),e.children(".chat-help-field-color_group").find(".chat-help-color").chat_help_color(),e.children(".chat-help-field-link_color").find(".chat-help-color").chat_help_color(),e.children(".chat-help-field-typography").find(".chat-help-color").chat_help_color(),e.children(".chat-help-field-select").find(".chat-help-chosen").chat_help_chosen(),e.children(".chat-help-field-checkbox").find(".chat-help-checkbox").chat_help_checkbox(),e.children(".chat-help-field-checkbox").find(".chat-help-checkbox-all").chat_help_checkbox_all(),e.children(".chat-help-field-button_set").find(".chat-help-siblings").chat_help_siblings(),e.children(".chat-help-field-image_select").find(".chat-help-siblings").chat_help_siblings(),e.children(".chat-help-field-layout_preset").find(".chat-help-siblings").chat_help_siblings(),e.children(".chat-help-field-palette").find(".chat-help-siblings").chat_help_siblings(),e.children(".chat-help-field").find(".chat-help-help").chat_help_help(),t.dependency&&e.chat_help_dependency(),e.data("inited",!0),T(b).trigger("chat-help-reload-script",e))})},T(b).ready(function(){T(".chat-help-save").chat_help_save(),T(".chat-help-options").chat_help_options(),T(".chat-help-sticky-header").chat_help_sticky(),T(".chat-help-nav-options").chat_help_nav_options(),T(".chat-help-nav-metabox").chat_help_nav_metabox(),T(".chat-help-taxonomy").chat_help_taxonomy(),T(".chat-help-page-templates").chat_help_page_templates(),T(".chat-help-post-formats").chat_help_post_formats(),T(".chat-help-shortcode").chat_help_shortcode(),T(".chat-help-search").chat_help_search(),T(".chat-help-confirm").chat_help_confirm(),T(".chat-help-expand-all").chat_help_expand_all(),T(".chat-help-onload").chat_help_reload_script(),T("#widgets-editor").chat_help_widgets(),T("#widgets-right").chat_help_widgets(),T("#menu-to-edit").chat_help_nav_menu(),T(b).on("click","#shortcode_copy",function(e){e.preventDefault(),T(this).siblings("#shortcode").select(),b.execCommand("copy"),T(".shortcode_after_copy").animate({opacity:1,bottom:25},300),setTimeout(function(){jQuery(".shortcode_after_copy").animate({opacity:0},200),jQuery(".shortcode_after_copy").animate({bottom:0},0)},2e3)})}),T.fn.getFieldInfo=function(){var n=["All Fields: {form_fields}"];return this.find(".chat-help-cloneable-item").each(function(e){var t=T(this),a=t.find(".field_select_items_select select").val();["recaptcha","checkbox","submit"].includes(a)||(t=t.find('.field_select_label input[type="text"]').val()||t.find('input[type="text"]:visible').val()||"Field Label",a&&n.push(t+`: {${a}_${e+1}}`))}),n.push("Global Vars: {siteTitle}, {siteEmail}, {currentURL}, {currentTitle}, {siteURL}, {ip}, {date}","{PRODUCT_START} WooCommerce Vars: {productName}, {productSlug}, {productSku}, {productPrice}, {productRegularPrice}, {productSalePrice}, {productStockStatus} {PRODUCT_END}","<b>Conditional Blocks:</b> {PRODUCT_START} ... {PRODUCT_END}, {NOT_PRODUCT_START} ... {NOT_PRODUCT_END}, {LOGGEDIN_START} ... {LOGGEDIN_END}, {NOT_LOGGEDIN_START} ... {NOT_LOGGEDIN_END}"),n.join("<br>")},T(b).ready(function(){function e(){var e=T(".chat-help-form-fields-wrapper"),t=T(".message_variables");t.length&&e.length&&(e=e.find(".chat-help-cloneable-wrapper").getFieldInfo(),t.html(e))}setTimeout(e,100),T(b).on("change",".field_select_items_select select",function(){setTimeout(e,100)}),T(b).on("keyup input change",'.chat-help-cloneable-item input[type="text"]',function(){e()}),T(".chat-help-cloneable-wrapper").on("chat-help.field-info-update",function(){e()})}),T("select option:contains((Pro))").attr("disabled",!0).css("opacity","1"),T(".switcher_pro_only .chat-help--switcher").attr("disabled","disabled").addClass("only_pro_switcher").css({background:"#B0BCC4"}),T(".only_pro_switcher").css({"pointer-events":"none",color:"#8796A1",position:"relative"}),T(".chat-help-pagination-type li:nth-child(n+2) input").attr("disabled",!0),T("label:contains((Pro))").css({"pointer-events":"none",opacity:"0.8","user-select":"none"}),T("label:contains((Pro)) input").attr("disabled",!0).css("opacity","1"),T("select option:contains((Pro))").attr("disabled",!0).css("opacity","1"),T(b).on("click",".wrapper_class_form",function(){T(".chat-help--active.wrapper_class_form").length&&T('.chat_help_type_of_whatsapp input[value="number"]').prop("checked",!0).trigger("change")}),T(b).on("keyup change","#chat-help-form",function(e){e.preventDefault(),T(this).find(".chat-help-save.chat-help-save-ajax").css({"background-color":"#1a74e4","pointer-events":"initial"}).val("Save Settings")}),T(b).on("click change","#chat-help-form .chat-help-cloneable-helper, #chat-help-form .chat-help-cloneable-helper .sp_wgs-icon-clone, #chat-help-form .chat-help-cloneable-helper .sp_wgs-icon-drag-and-drop, .chat-help-cloneable-add",function(e){e.preventDefault(),T("#chat-help-form").find(".chat-help-save.chat-help-save-ajax").css({"background-color":"#1a74e4","pointer-events":"initial"}).val("Save Settings")}),setTimeout(()=>{0==T("#chat-help-section-assign_layout .chat-help-cloneable-wrapper .chat-help-cloneable-item").length&&0<T("#chat-help-section-assign_layout .chat-help-cloneable-add").length&&T("#chat-help-section-assign_layout .chat-help-cloneable-add").trigger("click")},500),T(".chat-help-save").on("click",function(e){e.preventDefault(),T(this).css({"background-color":"#C5C5C6","pointer-events":"none","padding-left":"38px"}).val("Changes Saved")}),T(".chat_help_number").each(function(){var e=T(this),t=e.find("input"),a=e.find(".chat-help-desc-text");function n(e){var t,e=e.replace(/\D/g,"");3<=e.length?(t=encodeURIComponent("Hello! I'm testing the Chat Help plugin"),a.html('Test: <a target="_blank" rel="noopener noreferrer" href="'+("https://web.whatsapp.com/send?phone="+e+"&text="+t)+'">'+e+"</a>")):a.text("Phone number in international format. Only numbers.")}n(t.val()),t.on("input",function(){n(T(this).val())})}),T(".chat_help_group").each(function(){var e=T(this),t=e.find("input"),a=e.find(".chat-help-desc-text");function n(e){""!==e.trim()?a.html('Test: <a target="_blank" rel="noopener noreferrer" href="'+e+'">'+e+"</a>"):a.text("WhatsApp group link.")}n(t.val()),t.on("input",function(){n(T(this).val())})})})(jQuery,window,document);